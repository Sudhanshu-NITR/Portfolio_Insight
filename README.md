# PortfolioInsight: AI-Powered Portfolio Analytics for Indian Markets

**PortfolioInsight** is a comprehensive, full-stack portfolio management and analytics platform tailored specifically for the Indian stock market. Leveraging cutting-edge AI technology and real-time market data, it empowers investors with professional-grade tools to track, analyze, and optimize their investment portfolios across NSE and BSE exchanges.

![Landing Page](./Readme_Images/landing.png)

---

## üåü Why PortfolioInsight?

The Indian stock market is dynamic and complex. Individual investors often lack access to institutional-grade analytics tools that can help them make informed decisions. **PortfolioInsight** bridges this gap by providing:

- **üìä Real-Time Portfolio Tracking**: Monitor your holdings with live market data
- **ü§ñ AI-Powered Insights**: Get intelligent recommendations using RAG (Retrieval Augmented Generation) technology
- **üìà Advanced Analytics**: Track performance metrics, risk indicators, and sector allocations
- **üéØ Benchmark Comparison**: Compare your portfolio against NIFTY 50 and SENSEX indices
- **üí° Smart Decision Making**: Access comprehensive market data, analyst ratings, and corporate actions

Traditional portfolio trackers only show you what you own. **PortfolioInsight** shows you what it *means* ‚Äî combining your holdings with financial knowledge, market trends, and predictive analytics to help you understand the "why" behind the numbers.

---

## ‚ú® Key Features

### üì± Portfolio Management
- **Add, Edit, Delete Holdings**: Full CRUD operations for managing your stock positions
- **Multi-Exchange Support**: Track stocks from NSE and BSE
- **Bulk Operations**: Import/export holdings via CSV for quick portfolio setup
- **Detailed Holding Information**: Store purchase price, date, quantity, sector, and custom notes

### üìä Dashboard & Analytics
- **Real-Time Portfolio Value**: Live calculation of total portfolio worth
- **Profit/Loss Tracking**: Overall and daily P&L with percentage changes
- **Performance Charts**: Visualize portfolio growth against market benchmarks
- **Sector Allocation**: Interactive pie charts showing diversification
- **Top Performers**: Identify your best and worst performing stocks

### üìâ Risk Metrics
- **Sharpe Ratio**: Measure risk-adjusted returns
- **Portfolio Volatility**: Understand price fluctuation patterns
- **Maximum Drawdown**: Track worst peak-to-trough decline
- **Beta Coefficient**: Assess portfolio sensitivity vs. NIFTY

### ü§ñ AI-Powered Insights
- **RAG Technology**: Access financial knowledge from embedded books (The Intelligent Investor, Corporate Finance guides, etc.)
- **Contextual Q&A**: Ask questions about your portfolio and get intelligent responses
- **Market Analysis**: Get real-time market insights powered by LangChain and Google Gemini
- **Knowledge Base Search**: Query financial concepts, investment principles, and strategies

### üìà Market Data Integration
- **Live Stock Quotes**: Real-time price updates via yfinance
- **Corporate Actions**: Track dividends, stock splits, and bonus issues
- **Analyst Ratings**: Access recommendations and price targets
- **Intraday Data**: View price movements throughout the trading day
- **Stock Forecasts**: Get EPS, revenue, and other fundamental estimates

### üë§ Investment Profile
- **Risk Assessment**: Define your risk tolerance (Conservative, Moderate, Aggressive)
- **Investment Goals**: Set clear objectives (Wealth Creation, Retirement, etc.)
- **Time Horizon**: Plan for short, medium, or long-term investments
- **Cash Management**: Track available capital and monthly investment capacity
- **Sector Preferences**: Define preferred industries and investment themes

---

## üõ†Ô∏è Tech Stack

### üåê Frontend
- **Next.js 15** ‚Äì React framework with App Router for modern web applications
- **React 19** ‚Äì Latest React for building interactive UIs
- **Redux Toolkit + Redux Persist** ‚Äì Centralized state management with persistence
- **Tailwind CSS** ‚Äì Utility-first CSS framework for responsive design
- **Shadcn/UI** ‚Äì High-quality, accessible UI components (Radix UI-based)
- **Recharts** ‚Äì Composable charting library for data visualization
- **NextAuth.js** ‚Äì Complete authentication solution for Next.js
- **Axios** ‚Äì Promise-based HTTP client for API requests
- **React Hook Form** ‚Äì Performant, flexible form validation
- **Lucide React** ‚Äì Beautiful icon library

### üîó Backend

#### Next.js API Routes (Node.js)
- **Express-style API routes** ‚Äì RESTful endpoints for portfolio operations
- **MongoDB + Mongoose** ‚Äì NoSQL database for storing user data and holdings
- **JWT Authentication** ‚Äì Secure token-based authentication
- **bcrypt.js** ‚Äì Password hashing and security
- **NextAuth.js Integration** ‚Äì Server-side session management

#### Flask Backend (Python)
- **Flask** ‚Äì Lightweight Python web framework for AI services
- **LangChain** ‚Äì Framework for building LLM-powered applications
- **LangGraph** ‚Äì Workflow orchestration for complex AI agents
- **ChromaDB** ‚Äì Vector database for semantic search and RAG
- **Google Gemini AI** ‚Äì Large language model for intelligent responses
- **Ollama Support** ‚Äì Local LLM deployment option
- **yfinance** ‚Äì Market data retrieval from Yahoo Finance
- **Indian API** ‚Äì Real-time data for Indian stocks
- **Pandas & NumPy** ‚Äì Data processing and analysis
- **Sentence Transformers** ‚Äì Text embeddings for RAG

### üß∞ Dev & Build Tools
- **ESLint** ‚Äì Code linting for consistent code quality
- **PostCSS + Autoprefixer** ‚Äì CSS processing and browser compatibility
- **dotenv** ‚Äì Environment variable management
- **Gunicorn** ‚Äì WSGI HTTP server for Flask production deployment

---

## üöÄ Getting Started

### üì¶ Prerequisites

- **Node.js** (v18 or higher)
- **Python** (v3.11 or higher)
- **MongoDB** (Local installation or MongoDB Atlas account)
- **npm** or **yarn** package manager

---

### üîß Installation

#### 1Ô∏è‚É£ Clone the Repository

```bash
git clone https://github.com/your-username/PortfolioInsight.git
cd PortfolioInsight
```

#### 2Ô∏è‚É£ Install Frontend Dependencies

```bash
npm install
```

#### 3Ô∏è‚É£ Install Flask Backend Dependencies

```bash
cd flask-backend
pip install -r requirements.txt
cd ..
```

---

### üîê Environment Configuration

#### Frontend Environment Variables

Create a `.env` or `.env.local` file in the root directory:

```env
# MongoDB Connection
MONGODB_URI=your_mongodb_connection_string

# NextAuth Configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret_key_here

# Flask Backend URL
FLASK_BACKEND_URL=http://localhost:5000
```

>---
> **üîë Generate NEXTAUTH_SECRET:**
> ```bash
> openssl rand -base64 32
> ```

#### Flask Backend Environment Variables

Create a `.env` file inside the `flask-backend/` directory:

```env
# LLM Provider (ollama or gemini)
LLM_PROVIDER=gemini

# Ollama Configuration (if using local LLM)
OLLAMA_BASE_URL=http://localhost:11434
OLLAMA_CHAT_MODEL=deepseek-r1:8b
OLLAMA_EMBED_MODEL=nomic-embed-text

# Google Gemini Configuration (recommended)
GOOGLE_API_KEY=your_google_gemini_api_key

# Embedding Provider (hf, ollama, or gemini)
EMBED_PROVIDER=gemini

# Market Data API
INDIAN_API_BASE=https://stock.indianapi.in
INDIAN_API_KEY=your_indian_api_key

# Cache TTL (seconds)
CACHE_TTL_QUOTES=60
CACHE_TTL_CORPORATE=900
CACHE_TTL_FORECASTS=300

# Vector Database
VECTOR_DB_DIR=./.chroma

# LLM Parameters
CHAT_TEMPERATURE=0.3
MAX_TOKENS=2000

# RAG Configuration
CHUNK_SIZE=1200
CHUNK_OVERLAP=150
RETRIEVAL_K=6
```
> ---
> **üìù Notes:**
> - Get Google Gemini API key from: https://makersuite.google.com/app/apikey
> - Indian API key from: https://indianapi.in/indian-stock-market
> ---
---

### ‚ñ∂Ô∏è Running the Application

#### Start MongoDB (if running locally)

```bash
mongod
```

#### Start Flask Backend

Open a terminal window:

```bash
cd flask-backend
python app.py
```

Backend will run on: `http://localhost:5000`

#### Start Next.js Frontend

Open another terminal window:

```bash
npm run dev
```

Frontend will run on: `http://localhost:3000`
> ---
> **‚úÖ You're all set!** Open your browser and navigate to `http://localhost:3000`

---

## üì° API Reference

### üîê Authentication Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/api/auth/signup` | Register a new user account |
| `POST` | `/api/auth/signin` | Login with credentials |
| `POST` | `/api/auth/signout` | Logout user session |

### üìä Portfolio Management

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/api/add-holding` | Add a new stock to portfolio |
| `PATCH` | `/api/update-holding` | Update existing holding details |
| `DELETE` | `/api/delete-holding` | Remove a holding from portfolio |
| `GET` | `/api/dashboard-data` | Fetch complete portfolio analytics |
| `GET` | `/api/export-holdings` | Export holdings as CSV file |
| `POST` | `/api/import-holdings` | Import holdings from CSV |

### üë§ Investment Profile

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/profile-status` | Get user's investment profile |
| `PATCH` | `/api/update-investment-profile` | Update investment preferences |

### ü§ñ Flask Backend - AI & Market Data

#### AI/RAG Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/chat` | Main AI chat endpoint with RAG |
| `POST` | `/rag/ingest` | Ingest documents into knowledge base |
| `GET` | `/rag/debug/stats` | Check RAG system status |

#### Market Data Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `POST` | `/market/quotes` | Get real-time stock quotes |
| `POST` | `/market/price-ranges` | Get historical price ranges |
| `POST` | `/market/intraday` | Fetch intraday price data |
| `POST` | `/market/corporate-actions` | Get dividends and splits |
| `POST` | `/market/analyst-summary` | Analyst ratings and targets |

#### Tools Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/tools/trending` | Get trending stocks |
| `GET` | `/tools/stock-forecasts` | Fetch earnings/revenue forecasts |

---

## üì∏ Screenshots

### Landing Page
![Landing Page](./Readme_Images/landing.png)

### Dashboard Page
![Dashboard Page](./Readme_Images/dashboard.png)

### Holdings Page
![Holdings Page](./Readme_Images/holdings.png)

<!-- ### Analytics Dashboard
![Analytics Page](./screenshots/analytics.png) -->

### Performance Comparison
![AI Chatbot](./Readme_Images/chatbot.png)

---

## üìÇ Project Structure

```
PortfolioInsight/
‚îú‚îÄ‚îÄ flask-backend/              # Python Flask AI/RAG backend
‚îÇ   ‚îú‚îÄ‚îÄ app.py                  # Main Flask application
‚îÇ   ‚îú‚îÄ‚îÄ config.py               # Configuration management
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt        # Python dependencies
‚îÇ   ‚îú‚îÄ‚îÄ rag/                    # RAG implementation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ agent.py           # AI agent logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ingestion.py       # Document ingestion
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ llm.py             # LLM provider setup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ retriever.py       # Vector search
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ unifiedagent.py    # Unified RAG + tools agent
‚îÇ   ‚îú‚îÄ‚îÄ routes/                 # API route blueprints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ marketroutes.py    # Market data endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ toolsroutes.py     # Tool endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ unifiedragroutes.py # RAG chat endpoints
‚îÇ   ‚îú‚îÄ‚îÄ services/               # Business logic services
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ marketdataservice.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ corporateactionsservice.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analystservice.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ trendingservice.py
‚îÇ   ‚îú‚îÄ‚îÄ tools/                  # LangChain tools
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ markettools.py     # Market data tools
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analysistools.py   # Analysis tools
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ragtool.py         # Knowledge base search
‚îÇ   ‚îú‚îÄ‚îÄ utils/                  # Utility functions
‚îÇ   ‚îî‚îÄ‚îÄ books/                  # Financial PDF books for RAG
‚îÇ
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.jsx           # Landing page
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.jsx         # Root layout
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/               # Protected app routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/     # Dashboard page
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ holdings/      # Holdings management
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/     # Analytics page 
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai-insights/   # AI chat interface
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ investment-profile/ # Profile settings
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/              # Authentication pages
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sign-in/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ api/               # API route handlers
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ auth/          # Auth endpoints
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ add-holding/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ update-holding/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ delete-holding/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ dashboard-data/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ export-holdings/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ update-investment-profile/
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/            # React components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/               # Shadcn UI components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dashboard/        # Dashboard-specific components
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ holdings/         # Holdings management components
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ landing/          # Landing page sections
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ context/              # React context providers
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AuthProvider.jsx # NextAuth provider
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ store/                # Redux store
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.js          # Store configuration
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ portfolioSlice.js # Portfolio state management
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ model/                # MongoDB Mongoose models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.model.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Portfolio.model.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Holding.model.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ InvestmentProfile.model.js
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ helpers/              # Helper functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ portfolioHelpers.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ performanceHelpers.js
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ lib/                  # Library utilities
‚îÇ       ‚îú‚îÄ‚îÄ dbConnect.js      # MongoDB connection
‚îÇ       ‚îî‚îÄ‚îÄ utils.js          # General utilities
‚îÇ
‚îú‚îÄ‚îÄ public/                   # Static assets
‚îÇ   ‚îî‚îÄ‚îÄ portfolio.png         # Logo
‚îÇ
‚îú‚îÄ‚îÄ .env                      # Frontend environment variables
‚îú‚îÄ‚îÄ flask-backend/.env        # Backend environment variables
‚îú‚îÄ‚îÄ package.json              # Node.js dependencies
‚îú‚îÄ‚îÄ next.config.mjs           # Next.js configuration
‚îú‚îÄ‚îÄ tailwind.config.js        # Tailwind CSS config
‚îú‚îÄ‚îÄ components.json           # Shadcn UI config
‚îî‚îÄ‚îÄ docker-compose.yaml       # Docker deployment config
```

---

## üîÑ Data Flow

### Portfolio Analytics Pipeline

1. **User adds holdings** ‚Üí Stored in MongoDB via Next.js API routes
2. **Frontend requests dashboard data** ‚Üí `/api/dashboard-data` endpoint
3. **Backend fetches market prices** ‚Üí Calls Flask backend or yfinance
4. **Portfolio calculations** ‚Üí `portfolioHelpers.js` computes metrics
5. **Performance comparison** ‚Üí `performanceHelpers.js` generates charts
6. **Frontend renders** ‚Üí Redux state updates trigger component re-renders

### AI Insights Flow

1. **User asks question** ‚Üí Sent to Flask `/chat` endpoint
2. **Unified Agent processes** ‚Üí Determines if RAG or tools needed
3. **RAG retrieval** ‚Üí ChromaDB searches embedded financial books
4. **Tool execution** ‚Üí If needed, fetches live market data
5. **LLM generates response** ‚Üí Google Gemini combines context + data
6. **Streamed to frontend** ‚Üí User receives intelligent answer

---

## üö¢ Deployment

### Frontend Deployment (Vercel)

1. Push your code to GitHub
2. Import repository on [Vercel](https://vercel.com)
3. Add environment variables in Vercel dashboard
4. Deploy automatically on every push to `main`

### Backend Deployment (Render)

1. Create new Web Service on [Render](https://render.com)
2. Connect your GitHub repository
3. Set build command: `pip install -r flask-backend/requirements.txt`
4. Set start command: `cd flask-backend && gunicorn -b 0.0.0.0:$PORT wsgi:app`
5. Add environment variables
6. Deploy

### Database (MongoDB Atlas)

1. Create free cluster on [MongoDB Atlas](https://www.mongodb.com/cloud/atlas)
2. Whitelist IP addresses (0.0.0.0/0 for development)
3. Create database user
4. Copy connection string to `MONGODB_URI`

---

## üå± Future Enhancements

### Phase 1: Enhanced Analytics
- Tax calculation and reporting
- Transaction history and audit trail
- Email/SMS alerts for portfolio changes
- Customizable watchlists

### Phase 2: Advanced Features
- Mobile app (React Native)
- Options and derivatives tracking
- Mutual fund integration
- Goal-based investment planning

### Phase 3: AI Expansion
- Personalized stock recommendations
- Automated rebalancing suggestions
- Sentiment analysis from news & social media for stock performance
- Predictive modeling with ML
- Voice-enabled queries

---

## ü§ù Contributing

Contributions are welcome! Please follow these steps:

1. Fork the repository
2. Create a feature branch: `git checkout -b feature/your-feature-name`
3. Commit changes: `git commit -m 'Add some feature'`
4. Push to branch: `git push origin feature/your-feature-name`
5. Open a Pull Request

---

## üôè Acknowledgments

- **Financial Books**: The Intelligent Investor, Corporate Finance guides (embedded in RAG)
- **Market Data**: Yahoo Finance (via yfinance), Indian API
- **UI Components**: Shadcn/UI, Radix UI
- **AI Framework**: LangChain, Google Gemini
- **Inspiration**: Professional portfolio management tools

---

## ‚ö° Quick Start Summary

```bash
# 1. Clone and install
git clone https://github.com/your-username/PortfolioInsight.git
cd PortfolioInsight
npm install

# 2. Setup Flask backend
cd flask-backend
pip install -r requirements.txt
cd ..

# 3. Configure environment variables
cp .env.example .env
# Edit .env with your configuration

cp flask-backend/.env.example flask-backend/.env
# Edit flask-backend/.env with your API keys

# 4. Start MongoDB (if local)
mongod

# 5. Start Flask backend
cd flask-backend && python app.py

# 6. Start Next.js frontend (in new terminal)
npm run dev

# 7. Open http://localhost:3000
```

---

**Made with ‚ù§Ô∏è for Indian Investors** | **Powered by AI ü§ñ**